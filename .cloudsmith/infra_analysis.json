{
  "org_name": "CloudSmith-Release-Safety",
  "repo_name": "pet-clinic-infra",
  "repo_url": "https://github.com/CloudSmith-Release-Safety/pet-clinic-infra",
  "infrastructure_providers": [
    {
      "provider_id": "eks_cluster",
      "resource_type": "EKS",
      "resource_identifier": "petclinic-demo",
      "file_path": "terraform/eks/main.tf",
      "infrastructure_type": "Terraform",
      "description": "Amazon EKS cluster hosting the Pet Clinic microservices application",
      "interfaces": [
        {
          "interface_type": "api",
          "endpoint_pattern": "${cluster_endpoint}:443",
          "operations": ["CreatePod", "DeletePod", "ListPods", "GetPod", "UpdatePod"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "version": "1.32",
        "public_access": true,
        "private_access": true,
        "vpc_id": "${module.vpc.vpc_id}",
        "subnet_ids": "${module.vpc.private_subnets}",
        "managed_node_group": "default"
      },
      "security": {
        "oidc_provider": true,
        "cluster_security_group": "managed with additional rules"
      },
      "deployment_details": {
        "region": "us-west-2",
        "deployment_tool": "Terraform via GitHub Actions"
      },
      "external_consumers": [
        "spring-petclinic-api-gateway",
        "spring-petclinic-discovery-server",
        "spring-petclinic-config-server",
        "spring-petclinic-visits-service",
        "spring-petclinic-vets-service",
        "spring-petclinic-customers-service",
        "spring-petclinic-admin-server",
        "python-petclinic-insurance-service",
        "python-petclinic-billing-service",
        "dotnet-petclinic-payment"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "vpc_network",
      "resource_type": "VPC",
      "resource_identifier": "petclinic-demo",
      "file_path": "terraform/eks/main.tf",
      "infrastructure_type": "Terraform",
      "description": "VPC network infrastructure for the Pet Clinic application environment",
      "interfaces": [
        {
          "interface_type": "network",
          "endpoint_pattern": "10.0.0.0/16",
          "operations": ["Connect", "Route", "Isolate"],
          "authentication": "Security Groups"
        }
      ],
      "configuration": {
        "cidr_block": "10.0.0.0/16",
        "private_subnets": ["10.0.1.0/24", "10.0.2.0/24", "10.0.3.0/24"],
        "public_subnets": ["10.0.101.0/24", "10.0.102.0/24", "10.0.103.0/24"],
        "database_subnets": ["10.0.201.0/24", "10.0.202.0/24", "10.0.203.0/24"],
        "nat_gateway": true
      },
      "security": {
        "security_group_rules": {
          "postgres": "port 5432 allowed"
        }
      },
      "external_consumers": [
        "spring-petclinic-api-gateway",
        "spring-petclinic-discovery-server",
        "spring-petclinic-config-server",
        "spring-petclinic-visits-service",
        "spring-petclinic-vets-service",
        "spring-petclinic-customers-service",
        "spring-petclinic-admin-server",
        "python-petclinic-insurance-service",
        "python-petclinic-billing-service",
        "dotnet-petclinic-payment"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "postgres_database",
      "resource_type": "RDS",
      "resource_identifier": "petclinic-database",
      "file_path": "terraform/eks/database.tf",
      "infrastructure_type": "Terraform",
      "description": "PostgreSQL database for the Pet Clinic application data storage",
      "interfaces": [
        {
          "interface_type": "database",
          "endpoint_pattern": "${module.db.db_instance_endpoint}",
          "operations": ["Connect", "Query", "Insert", "Update", "Delete"],
          "authentication": "Username/Password"
        }
      ],
      "configuration": {
        "engine": "postgres",
        "version": "16",
        "instance_class": "db.t4g.large",
        "allocated_storage": 20,
        "max_allocated_storage": 100,
        "multi_az": true,
        "db_name": "postgres",
        "username": "djangouser",
        "port": 5432,
        "performance_insights_enabled": true
      },
      "security": {
        "security_group_id": "${module.vpc.default_security_group_id}",
        "subnet_group": "${module.vpc.database_subnet_group_name}"
      },
      "external_consumers": [
        "spring-petclinic-visits-service",
        "spring-petclinic-vets-service",
        "spring-petclinic-customers-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "billing_info_table",
      "resource_type": "DynamoDB",
      "resource_identifier": "BillingInfo",
      "file_path": "terraform/eks/database.tf",
      "infrastructure_type": "Terraform",
      "description": "DynamoDB table for storing billing information of pet owners",
      "interfaces": [
        {
          "interface_type": "database",
          "endpoint_pattern": "dynamodb.${region}.amazonaws.com",
          "operations": ["GetItem", "PutItem", "UpdateItem", "DeleteItem", "Query", "Scan"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "billing_mode": "PROVISIONED",
        "read_capacity": 4,
        "write_capacity": 6,
        "hash_key": "ownerId",
        "range_key": "timestamp",
        "point_in_time_recovery": false
      },
      "external_consumers": [
        "python-petclinic-billing-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "payment_table",
      "resource_type": "DynamoDB",
      "resource_identifier": "PetClinicPayment",
      "file_path": "terraform/eks/database.tf",
      "infrastructure_type": "Terraform",
      "description": "DynamoDB table for storing payment transactions for the Pet Clinic services",
      "interfaces": [
        {
          "interface_type": "database",
          "endpoint_pattern": "dynamodb.${region}.amazonaws.com",
          "operations": ["GetItem", "PutItem", "UpdateItem", "DeleteItem", "Query", "Scan"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "billing_mode": "PROVISIONED",
        "read_capacity": 2,
        "write_capacity": 1,
        "hash_key": "id",
        "point_in_time_recovery": true
      },
      "external_consumers": [
        "dotnet-petclinic-payment"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "apm_test_table",
      "resource_type": "DynamoDB",
      "resource_identifier": "apm_test",
      "file_path": "terraform/eks/database.tf",
      "infrastructure_type": "Terraform",
      "description": "DynamoDB table for testing Application Performance Monitoring (APM) functionality",
      "interfaces": [
        {
          "interface_type": "database",
          "endpoint_pattern": "dynamodb.${region}.amazonaws.com",
          "operations": ["GetItem", "PutItem", "UpdateItem", "DeleteItem", "Query", "Scan"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "billing_mode": "PROVISIONED",
        "read_capacity": 1,
        "write_capacity": 1,
        "hash_key": "id",
        "point_in_time_recovery": true
      },
      "external_consumers": [
        "spring-petclinic-visits-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "apm_test_queue",
      "resource_type": "SQS",
      "resource_identifier": "apm_test",
      "file_path": "terraform/eks/main.tf",
      "infrastructure_type": "Terraform",
      "description": "SQS queue for testing Application Performance Monitoring (APM) functionality",
      "interfaces": [
        {
          "interface_type": "queue",
          "endpoint_pattern": "sqs.${region}.amazonaws.com",
          "operations": ["SendMessage", "ReceiveMessage", "DeleteMessage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "fifo": false,
        "standard_queue": true
      },
      "external_consumers": [
        "spring-petclinic-visits-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "apm_test_stream",
      "resource_type": "Kinesis",
      "resource_identifier": "apm_test",
      "file_path": "terraform/eks/main.tf",
      "infrastructure_type": "Terraform",
      "description": "Kinesis stream for testing Application Performance Monitoring (APM) functionality",
      "interfaces": [
        {
          "interface_type": "stream",
          "endpoint_pattern": "kinesis.${region}.amazonaws.com",
          "operations": ["PutRecord", "PutRecords", "GetRecords", "GetShardIterator"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "shard_count": 1
      },
      "external_consumers": [
        "spring-petclinic-visits-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "visits_service_account",
      "resource_type": "IAM",
      "resource_identifier": "DemoServiceRole-petclinic-demo",
      "file_path": "terraform/eks/main.tf",
      "infrastructure_type": "Terraform",
      "description": "IAM role for the visits service to access AWS services via IRSA (IAM Roles for Service Accounts)",
      "interfaces": [
        {
          "interface_type": "auth",
          "endpoint_pattern": "iam.amazonaws.com",
          "operations": ["AssumeRole", "GetRole", "PassRole"],
          "authentication": "OIDC"
        }
      ],
      "configuration": {
        "oidc_provider": "${replace(module.eks.oidc_provider, \"https://\", \"\")}",
        "service_account": "visits-service-account",
        "namespace": "default",
        "policies": [
          "arn:aws:iam::aws:policy/AmazonSQSFullAccess", 
          "arn:aws:iam::aws:policy/AmazonS3FullAccess", 
          "arn:aws:iam::aws:policy/AmazonKinesisFullAccess", 
          "arn:aws:iam::aws:policy/AmazonDynamoDBFullAccess", 
          "arn:aws:iam::aws:policy/AmazonBedrockFullAccess"
        ]
      },
      "external_consumers": [
        "spring-petclinic-visits-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "cloudwatch_observability",
      "resource_type": "CloudWatch",
      "resource_identifier": "amazon-cloudwatch-observability",
      "file_path": "terraform/eks/observability.tf",
      "infrastructure_type": "Terraform",
      "description": "CloudWatch observability addon for EKS to monitor application performance",
      "interfaces": [
        {
          "interface_type": "logging",
          "endpoint_pattern": "logs.${region}.amazonaws.com",
          "operations": ["PutLogEvents", "CreateLogStream", "CreateLogGroup"],
          "authentication": "IAM"
        },
        {
          "interface_type": "metrics",
          "endpoint_pattern": "monitoring.${region}.amazonaws.com",
          "operations": ["PutMetricData"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "addon_version": "${var.cloudwatch_observability_addon_version}",
        "service_account": "cloudwatch-agent",
        "namespace": "amazon-cloudwatch"
      },
      "security": {
        "role_name": "AmazonCloudWatchObservabilityAddonRole-${var.cluster_name}",
        "policies": [
          "CloudWatchAgentServerPolicy",
          "AWSXrayFullAccess"
        ]
      },
      "external_consumers": [
        "spring-petclinic-api-gateway",
        "spring-petclinic-discovery-server",
        "spring-petclinic-config-server",
        "spring-petclinic-visits-service",
        "spring-petclinic-vets-service",
        "spring-petclinic-customers-service",
        "spring-petclinic-admin-server",
        "python-petclinic-insurance-service",
        "python-petclinic-billing-service",
        "dotnet-petclinic-payment"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "appsignals_log_group",
      "resource_type": "CloudWatch",
      "resource_identifier": "/aws/appsignals/eks",
      "file_path": "terraform/eks/observability.tf",
      "infrastructure_type": "Terraform",
      "description": "CloudWatch log group for App Signals to monitor application health and performance",
      "interfaces": [
        {
          "interface_type": "logging",
          "endpoint_pattern": "logs.${region}.amazonaws.com",
          "operations": ["PutLogEvents", "GetLogEvents"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "retention_in_days": 30
      },
      "external_consumers": [
        "spring-petclinic-api-gateway",
        "spring-petclinic-discovery-server",
        "spring-petclinic-config-server",
        "spring-petclinic-visits-service",
        "spring-petclinic-vets-service",
        "spring-petclinic-customers-service",
        "spring-petclinic-admin-server",
        "python-petclinic-insurance-service",
        "python-petclinic-billing-service",
        "dotnet-petclinic-payment"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "api_gateway_ecr",
      "resource_type": "ECR",
      "resource_identifier": "springcommunity/spring-petclinic-api-gateway",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the API Gateway container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/springcommunity/spring-petclinic-api-gateway",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "spring-petclinic-api-gateway"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "discovery_server_ecr",
      "resource_type": "ECR",
      "resource_identifier": "springcommunity/spring-petclinic-discovery-server",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Discovery Server container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/springcommunity/spring-petclinic-discovery-server",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "spring-petclinic-discovery-server"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "config_server_ecr",
      "resource_type": "ECR",
      "resource_identifier": "springcommunity/spring-petclinic-config-server",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Config Server container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/springcommunity/spring-petclinic-config-server",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "spring-petclinic-config-server"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "visits_service_ecr",
      "resource_type": "ECR",
      "resource_identifier": "springcommunity/spring-petclinic-visits-service",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Visits Service container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/springcommunity/spring-petclinic-visits-service",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "spring-petclinic-visits-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "vets_service_ecr",
      "resource_type": "ECR",
      "resource_identifier": "springcommunity/spring-petclinic-vets-service",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Vets Service container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/springcommunity/spring-petclinic-vets-service",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "spring-petclinic-vets-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "customers_service_ecr",
      "resource_type": "ECR",
      "resource_identifier": "springcommunity/spring-petclinic-customers-service",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Customers Service container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/springcommunity/spring-petclinic-customers-service",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "spring-petclinic-customers-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "admin_server_ecr",
      "resource_type": "ECR",
      "resource_identifier": "springcommunity/spring-petclinic-admin-server",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Admin Server container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/springcommunity/spring-petclinic-admin-server",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "spring-petclinic-admin-server"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "insurance_service_ecr",
      "resource_type": "ECR",
      "resource_identifier": "python-petclinic-insurance-service",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Python Insurance Service container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/python-petclinic-insurance-service",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "python-petclinic-insurance-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "billing_service_ecr",
      "resource_type": "ECR",
      "resource_identifier": "python-petclinic-billing-service",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the Python Billing Service container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/python-petclinic-billing-service",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "python-petclinic-billing-service"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "payment_service_ecr",
      "resource_type": "ECR",
      "resource_identifier": "dotnet-petclinic-payment",
      "file_path": "terraform/eks/repo.tf",
      "infrastructure_type": "Terraform",
      "description": "ECR repository for the .NET Payment Service container images",
      "interfaces": [
        {
          "interface_type": "container-registry",
          "endpoint_pattern": "${account_id}.dkr.ecr.${region}.amazonaws.com/dotnet-petclinic-payment",
          "operations": ["PushImage", "PullImage"],
          "authentication": "IAM"
        }
      ],
      "configuration": {
        "image_tag_mutability": "MUTABLE",
        "scan_on_push": true,
        "force_delete": true
      },
      "security": {
        "encryption_type": "KMS"
      },
      "external_consumers": [
        "dotnet-petclinic-payment"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "alb_controller",
      "resource_type": "ALB",
      "resource_identifier": "aws-load-balancer-controller",
      "file_path": "terraform/eks/alb-controller.tf",
      "infrastructure_type": "Terraform",
      "description": "AWS Load Balancer Controller for managing Ingress resources in EKS",
      "interfaces": [
        {
          "interface_type": "api",
          "endpoint_pattern": "kubernetes.default.svc/apis/networking.k8s.io",
          "operations": ["CreateIngress", "UpdateIngress", "DeleteIngress"],
          "authentication": "OIDC"
        }
      ],
      "configuration": {
        "cluster_name": "${var.cluster_name}",
        "oidc_issuer": "${module.eks.cluster_oidc_issuer_url}"
      },
      "security": {
        "oidc_provider_arn": "${module.eks.oidc_provider_arn}"
      },
      "external_consumers": [
        "spring-petclinic-api-gateway"
      ],
      "provider_type": "internal"
    },
    {
      "provider_id": "ebs_csi_driver",
      "resource_type": "EBS",
      "resource_identifier": "aws-ebs-csi-driver",
      "file_path": "terraform/eks/ebs-csi-driver.tf",
      "infrastructure_type": "Terraform",
      "description": "EBS CSI Driver for provisioning persistent volumes in EKS",
      "interfaces": [
        {
          "interface_type": "storage",
          "endpoint_pattern": "kubernetes.default.svc/apis/storage.k8s.io",
          "operations": ["CreateVolume", "DeleteVolume", "AttachVolume", "DetachVolume"],
          "authentication": "OIDC"
        }
      ],
      "configuration": {
        "addon_version": "${var.ebs_csi_addon_version}",
        "service_account": "ebs-csi-controller-sa",
        "namespace": "kube-system"
      },
      "security": {
        "role_name": "AmazonEbsCsiDriverAddonRole-${var.cluster_name}",
        "oidc_provider": "${module.eks.oidc_provider_arn}"
      },
      "external_consumers": [
        "spring-petclinic-api-gateway",
        "spring-petclinic-discovery-server",
        "spring-petclinic-config-server",
        "spring-petclinic-visits-service",
        "spring-petclinic-vets-service",
        "spring-petclinic-customers-service",
        "spring-petclinic-admin-server",
        "python-petclinic-insurance-service",
        "python-petclinic-billing-service",
        "dotnet-petclinic-payment"
      ],
      "provider_type": "internal"
    }
  ],
  "application_consumers": [
    {
      "consumer_id": "spring_petclinic_visits",
      "component_type": "service",
      "file_path": "N/A - External repository",
      "language": "Java",
      "description": "Spring-based microservice for managing pet clinic visits data and records",
      "resource_discovery": {
        "method": "environment variables and kubernetes service discovery",
        "environment_variables": ["SPRING_DATASOURCE_URL", "AWS_REGION"]
      },
      "authentication": {
        "method": "IAM role",
        "role_references": ["DemoServiceRole-petclinic-demo"]
      },
      "sdk_usage": {
        "sdk_type": "AWS SDK for Java",
        "clients": ["AmazonDynamoDB", "AmazonSQS", "AmazonKinesis"]
      },
      "package_dependencies": [
        "org.springframework.boot",
        "aws-java-sdk-dynamodb",
        "aws-java-sdk-sqs",
        "aws-java-sdk-kinesis"
      ],
      "internal_dependencies": [],
      "external_dependencies": [
        {
          "resource_type": "RDS",
          "resource_name": "petclinic-database",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "DynamoDB",
          "resource_name": "apm_test",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "SQS",
          "resource_name": "apm_test",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "Kinesis",
          "resource_name": "apm_test",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "IAM",
          "resource_name": "DemoServiceRole-petclinic-demo",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "ECR",
          "resource_name": "springcommunity/spring-petclinic-visits-service",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        }
      ]
    },
    {
      "consumer_id": "spring_petclinic_vets",
      "component_type": "service",
      "file_path": "N/A - External repository",
      "language": "Java",
      "description": "Spring-based microservice for managing veterinarian information",
      "resource_discovery": {
        "method": "environment variables and kubernetes service discovery",
        "environment_variables": ["SPRING_DATASOURCE_URL"]
      },
      "authentication": {
        "method": "Username/Password",
        "role_references": []
      },
      "sdk_usage": {
        "sdk_type": "Spring Data JPA",
        "clients": ["JpaRepository"]
      },
      "package_dependencies": [
        "org.springframework.boot",
        "spring-boot-starter-data-jpa",
        "org.postgresql"
      ],
      "internal_dependencies": [],
      "external_dependencies": [
        {
          "resource_type": "RDS",
          "resource_name": "petclinic-database",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "ECR",
          "resource_name": "springcommunity/spring-petclinic-vets-service",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        }
      ]
    },
    {
      "consumer_id": "spring_petclinic_customers",
      "component_type": "service",
      "file_path": "N/A - External repository",
      "language": "Java",
      "description": "Spring-based microservice for managing pet owner customer information",
      "resource_discovery": {
        "method": "environment variables and kubernetes service discovery",
        "environment_variables": ["SPRING_DATASOURCE_URL"]
      },
      "authentication": {
        "method": "Username/Password",
        "role_references": []
      },
      "sdk_usage": {
        "sdk_type": "Spring Data JPA",
        "clients": ["JpaRepository"]
      },
      "package_dependencies": [
        "org.springframework.boot",
        "spring-boot-starter-data-jpa",
        "org.postgresql"
      ],
      "internal_dependencies": [],
      "external_dependencies": [
        {
          "resource_type": "RDS",
          "resource_name": "petclinic-database",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "ECR",
          "resource_name": "springcommunity/spring-petclinic-customers-service",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        }
      ]
    },
    {
      "consumer_id": "python_billing_service",
      "component_type": "service",
      "file_path": "N/A - External repository",
      "language": "Python",
      "description": "Python microservice for billing functionality in the Pet Clinic application",
      "resource_discovery": {
        "method": "environment variables",
        "environment_variables": ["AWS_REGION", "AWS_DEFAULT_REGION"]
      },
      "authentication": {
        "method": "IAM role",
        "role_references": []
      },
      "sdk_usage": {
        "sdk_type": "boto3",
        "clients": ["dynamodb"]
      },
      "package_dependencies": [
        "boto3",
        "aws-sdk-python"
      ],
      "internal_dependencies": [],
      "external_dependencies": [
        {
          "resource_type": "DynamoDB",
          "resource_name": "BillingInfo",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "ECR",
          "resource_name": "python-petclinic-billing-service",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        }
      ]
    },
    {
      "consumer_id": "dotnet_payment_service",
      "component_type": "service",
      "file_path": "N/A - External repository",
      "language": "C#",
      "description": ".NET microservice for processing payment transactions in the Pet Clinic application",
      "resource_discovery": {
        "method": "environment variables and configuration files",
        "environment_variables": ["AWS_REGION", "AWS_DEFAULT_REGION"]
      },
      "authentication": {
        "method": "IAM role",
        "role_references": []
      },
      "sdk_usage": {
        "sdk_type": "AWS SDK for .NET",
        "clients": ["AmazonDynamoDBClient"]
      },
      "package_dependencies": [
        "AWSSDK.DynamoDBv2",
        "AWSSDK.Extensions.NETCore.Setup"
      ],
      "internal_dependencies": [],
      "external_dependencies": [
        {
          "resource_type": "DynamoDB",
          "resource_name": "PetClinicPayment",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "ECR",
          "resource_name": "dotnet-petclinic-payment",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        }
      ]
    },
    {
      "consumer_id": "petclinic_api_gateway",
      "component_type": "service",
      "file_path": "N/A - External repository",
      "language": "Java",
      "description": "API Gateway service for routing requests to the appropriate Pet Clinic microservices",
      "resource_discovery": {
        "method": "kubernetes service discovery",
        "environment_variables": ["SPRING_CLOUD_CONFIG_URI", "SPRING_CLOUD_DISCOVERY_SERVER"]
      },
      "authentication": {
        "method": "IAM role",
        "role_references": []
      },
      "sdk_usage": {
        "sdk_type": "Spring Cloud Gateway",
        "clients": []
      },
      "package_dependencies": [
        "org.springframework.cloud",
        "spring-cloud-starter-gateway"
      ],
      "internal_dependencies": [],
      "external_dependencies": [
        {
          "resource_type": "EKS",
          "resource_name": "petclinic-demo",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "ALB",
          "resource_name": "aws-load-balancer-controller",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        },
        {
          "resource_type": "ECR",
          "resource_name": "springcommunity/spring-petclinic-api-gateway",
          "repository": "CloudSmith-Release-Safety/pet-clinic-infra"
        }
      ]
    }
  ],
  "connections": [
    {
      "connection_id": "visits_service_to_postgres",
      "consumer_id": "spring_petclinic_visits",
      "provider_id": "postgres_database",
      "provider_resource_type": "RDS",
      "operation": "Query",
      "access_type": "read-write",
      "description": "Spring Petclinic Visits Service connects to PostgreSQL database for visit data storage and retrieval",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/database.tf",
      "configuration_source": "environment variable",
      "criticality": "high",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "visits_service_to_apm_test_table",
      "consumer_id": "spring_petclinic_visits",
      "provider_id": "apm_test_table",
      "provider_resource_type": "DynamoDB",
      "operation": "GetItem",
      "access_type": "read-write",
      "description": "Spring Petclinic Visits Service interacts with APM test DynamoDB table for testing and monitoring",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/database.tf",
      "configuration_source": "IAM role",
      "criticality": "medium",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "visits_service_to_apm_test_queue",
      "consumer_id": "spring_petclinic_visits",
      "provider_id": "apm_test_queue",
      "provider_resource_type": "SQS",
      "operation": "SendMessage",
      "access_type": "write",
      "description": "Spring Petclinic Visits Service sends messages to SQS queue for APM testing",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/main.tf",
      "configuration_source": "IAM role",
      "criticality": "medium",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "visits_service_to_apm_test_stream",
      "consumer_id": "spring_petclinic_visits",
      "provider_id": "apm_test_stream",
      "provider_resource_type": "Kinesis",
      "operation": "PutRecord",
      "access_type": "write",
      "description": "Spring Petclinic Visits Service writes records to Kinesis stream for APM testing",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/main.tf",
      "configuration_source": "IAM role",
      "criticality": "medium",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "visits_service_to_iam_role",
      "consumer_id": "spring_petclinic_visits",
      "provider_id": "visits_service_account",
      "provider_resource_type": "IAM",
      "operation": "AssumeRole",
      "access_type": "read",
      "description": "Spring Petclinic Visits Service assumes IAM role for AWS service access",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/main.tf",
      "configuration_source": "Kubernetes service account annotation",
      "criticality": "high",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "vets_service_to_postgres",
      "consumer_id": "spring_petclinic_vets",
      "provider_id": "postgres_database",
      "provider_resource_type": "RDS",
      "operation": "Query",
      "access_type": "read-write",
      "description": "Spring Petclinic Vets Service connects to PostgreSQL database for veterinarian data",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/database.tf",
      "configuration_source": "environment variable",
      "criticality": "high",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "customers_service_to_postgres",
      "consumer_id": "spring_petclinic_customers",
      "provider_id": "postgres_database",
      "provider_resource_type": "RDS",
      "operation": "Query",
      "access_type": "read-write",
      "description": "Spring Petclinic Customers Service connects to PostgreSQL database for customer data",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/database.tf",
      "configuration_source": "environment variable",
      "criticality": "high",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "billing_service_to_billing_table",
      "consumer_id": "python_billing_service",
      "provider_id": "billing_info_table",
      "provider_resource_type": "DynamoDB",
      "operation": "PutItem",
      "access_type": "write",
      "description": "Python Billing Service writes billing information to DynamoDB table",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/database.tf",
      "configuration_source": "IAM role",
      "criticality": "high",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "payment_service_to_payment_table",
      "consumer_id": "dotnet_payment_service",
      "provider_id": "payment_table",
      "provider_resource_type": "DynamoDB",
      "operation": "PutItem",
      "access_type": "write",
      "description": ".NET Payment Service writes payment transaction data to DynamoDB table",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/database.tf",
      "configuration_source": "IAM role",
      "criticality": "high",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "all_services_to_cloudwatch",
      "consumer_id": "spring_petclinic_visits",
      "provider_id": "cloudwatch_observability",
      "provider_resource_type": "CloudWatch",
      "operation": "PutLogEvents",
      "access_type": "write",
      "description": "All Pet Clinic services send logs and metrics to CloudWatch for monitoring",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/observability.tf",
      "configuration_source": "EKS add-on",
      "criticality": "medium",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    },
    {
      "connection_id": "api_gateway_to_alb_controller",
      "consumer_id": "petclinic_api_gateway",
      "provider_id": "alb_controller",
      "provider_resource_type": "ALB",
      "operation": "CreateIngress",
      "access_type": "read-write",
      "description": "API Gateway service uses AWS Load Balancer Controller to create Ingress resources for routing",
      "code_snippet": "N/A - External service code not available in this repository",
      "source_file_path": "N/A - External repository",
      "target_file_path": "terraform/eks/alb-controller.tf",
      "configuration_source": "Kubernetes resources",
      "criticality": "high",
      "connection_type": "direct",
      "cross_repo": true,
      "target_repo": "CloudSmith-Release-Safety/pet-clinic-infra"
    }
  ],
  "architecture": {
    "application_type": "microservice",
    "infrastructure_pattern": "container-based",
    "deployment_approach": "CI/CD with Terraform via GitHub Actions",
    "configuration_management": "Environment variables and Kubernetes ConfigMaps/Secrets",
    "critical_paths": [
      {
        "path_name": "database_connectivity",
        "description": "Core services connection to PostgreSQL database for persistent data storage",
        "involved_components": ["postgres_database", "spring_petclinic_visits", "spring_petclinic_vets", "spring_petclinic_customers"]
      },
      {
        "path_name": "payment_processing",
        "description": ".NET Payment service interaction with DynamoDB for payment processing",
        "involved_components": ["payment_table", "dotnet_payment_service"]
      },
      {
        "path_name": "billing_management",
        "description": "Python Billing service interaction with DynamoDB for billing information",
        "involved_components": ["billing_info_table", "python_billing_service"]
      },
      {
        "path_name": "api_routing",
        "description": "API Gateway routing traffic to appropriate microservices",
        "involved_components": ["alb_controller", "petclinic_api_gateway"]
      },
      {
        "path_name": "observability",
        "description": "All services sending telemetry data to CloudWatch",
        "involved_components": ["cloudwatch_observability", "appsignals_log_group"]
      }
    ],
    "security_model": {
      "authentication": "IAM roles with OIDC provider for service accounts",
      "authorization": "IAM policies and Kubernetes RBAC",
      "data_protection": "KMS encryption for ECR repositories"
    },
    "cross_repo_dependencies": {
      "provides_to": [
        {"repository": "spring-petclinic-api-gateway", "resources": ["eks_cluster", "api_gateway_ecr", "alb_controller"]},
        {"repository": "spring-petclinic-discovery-server", "resources": ["eks_cluster", "discovery_server_ecr"]},
        {"repository": "spring-petclinic-config-server", "resources": ["eks_cluster", "config_server_ecr"]},
        {"repository": "spring-petclinic-visits-service", "resources": ["eks_cluster", "postgres_database", "apm_test_table", "apm_test_queue", "apm_test_stream", "visits_service_ecr", "visits_service_account"]},
        {"repository": "spring-petclinic-vets-service", "resources": ["eks_cluster", "postgres_database", "vets_service_ecr"]},
        {"repository": "spring-petclinic-customers-service", "resources": ["eks_cluster", "postgres_database", "customers_service_ecr"]},
        {"repository": "spring-petclinic-admin-server", "resources": ["eks_cluster", "admin_server_ecr"]},
        {"repository": "python-petclinic-insurance-service", "resources": ["eks_cluster", "insurance_service_ecr"]},
        {"repository": "python-petclinic-billing-service", "resources": ["eks_cluster", "billing_info_table", "billing_service_ecr"]},
        {"repository": "dotnet-petclinic-payment", "resources": ["eks_cluster", "payment_table", "payment_service_ecr"]}
      ],
      "consumes_from": [],
      "shared_infrastructure": true
    }
  }
}